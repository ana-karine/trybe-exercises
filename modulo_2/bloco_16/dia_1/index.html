<!DOCTYPE html>
<html>
  <head>
    <title>Redux basic example</title>
    <script src="https://unpkg.com/redux@latest/dist/redux.min.js"></script>
  </head>

  <body>
    <div>
      Counter:
      <span id="value">0</span>
      <br>

      Incremented counter:
      <input type="text" id="incrementValue" />
      <input type="submit" id="increment" value="+" />
      <br>

      Decremented counter:
      <input type="text" id="decrementValue" />
      <input type="submit" id="decrement" value="-" />
      <br>

      Click count:
      <span id="count">0</span>
      <br>

      Array:
      <span id="numbers">0</span>
      <br>
    </div>

    <script>
      const INITIAL_STATE = {
        count: 0,
        incrementValue: 0,
        decrementValue: 0,
        arrayValues: []
      }

      function changeState(state, action) {
        const value = action.type === 'INCREMENT' ? state.incrementValue : state.decrementValue

        return {
          ...state,
          count: state.count + value,
          arrayValues: [...state.arrayValues, value]
        }
      }

      function counterReducer(state = INITIAL_STATE, action) {
        switch (action.type) {
          case 'INCREMENT':
            return changeState(state, action)
          case 'DECREMENT':
            return changeState(state, action)
          case 'INCREMENT_VALUE':
            return {
              ...state,
              incrementValue: action.value
            }
          case 'DECREMENT_VALUE':
            return {
              ...state,
              decrementValue: action.value
            }
          default:
            return state;
        }
      }

      const store = Redux.createStore(counterReducer);

      document.getElementById('increment')
        .addEventListener('click', () => {

          const actionIncrement = { type: 'INCREMENT' };
          store.dispatch(actionIncrement)
        })

      document.getElementById('decrement')
        .addEventListener('click', () => {

          const actionDecrement = { type: 'DECREMENT' };
          store.dispatch(actionDecrement)
        })

      document.getElementById('incrementValue')
        .addEventListener('change', (event) => {

          const actionIncrementValue = {
            type: 'INCREMENT_VALUE',
            value: parseInt(`${event.target.value}`)
          }

          store.dispatch(actionIncrementValue)
        })

      document.getElementById('decrementValue')
        .addEventListener('change', (event) => {

          const actionDecrementValue = {
            type: 'DECREMENT_VALUE',
            value: parseInt(`-${event.target.value}`)
          }

          store.dispatch(actionDecrementValue)
        })

      store.subscribe(() => {
        document.getElementById('value').innerHTML = store.getState().count.toString();
        document.getElementById('count').innerHTML = store.getState().arrayValues.length;
        document.getElementById('numbers').innerHTML = store.getState().arrayValues;
      });
    </script>

  </body>
</html>
